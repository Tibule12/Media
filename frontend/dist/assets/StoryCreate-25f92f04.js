import{_ as m,i as c,o as r,c as o,a as i,d as p,g as n,t as l,e as u}from"./index-b19461a9.js";const _={data(){return{mediaFile:null,mediaPreview:null,message:"",error:""}},methods:{onFileChange(t){const e=t.target.files[0];e&&(this.mediaFile=e,this.mediaPreview=URL.createObjectURL(e))},isVideo(t){return t.endsWith(".mp4")||t.endsWith(".webm")||t.endsWith(".ogg")},async submitStory(){if(this.error="",this.message="",!this.mediaFile){this.error="Please select a media file to upload.";return}try{const t=new FormData;t.append("media",this.mediaFile);const e=new Date(Date.now()+24*60*60*1e3).toISOString();t.append("expires_at",e),await c.post("/api/stories/",t,{headers:{"Content-Type":"multipart/form-data"}}),this.message="Story posted successfully.",this.mediaFile=null,this.mediaPreview=null}catch{this.error="Failed to post story. Please try again."}}}},y={class:"story-create-container"},g={class:"form-group"},h={key:0,class:"media-preview"},f={key:0,controls:"",autoplay:"",muted:"",loop:""},v=["src"],w=["src"],b=["disabled"],S={key:1,class:"success-message"},F={key:2,class:"error-message"};function P(t,e,C,x,s,a){return r(),o("div",y,[e[4]||(e[4]=i("h1",null,"Create Story",-1)),i("form",{onSubmit:e[1]||(e[1]=u((...d)=>a.submitStory&&a.submitStory(...d),["prevent"])),enctype:"multipart/form-data"},[i("div",g,[e[2]||(e[2]=i("label",{for:"media"},"Upload Media (Image or Video)",-1)),i("input",{id:"media",type:"file",onChange:e[0]||(e[0]=(...d)=>a.onFileChange&&a.onFileChange(...d)),accept:"image/*,video/*",required:""},null,32)]),s.mediaPreview?(r(),o("div",h,[a.isVideo(s.mediaPreview)?(r(),o("video",f,[i("source",{src:s.mediaPreview},null,8,v),e[3]||(e[3]=p(" Your browser does not support the video tag. "))])):(r(),o("img",{key:1,src:s.mediaPreview,alt:"Media Preview"},null,8,w))])):n("",!0),i("button",{type:"submit",class:"btn btn-primary",disabled:!s.mediaFile},"Post Story",8,b),s.message?(r(),o("p",S,l(s.message),1)):n("",!0),s.error?(r(),o("p",F,l(s.error),1)):n("",!0)],32)])}const V=m(_,[["render",P],["__scopeId","data-v-83dc7d72"]]);export{V as default};
