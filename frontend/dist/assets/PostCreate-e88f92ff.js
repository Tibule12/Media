import{_ as u,h as d,o as i,c as p,a as o,f as m,v as f,e as c,t as h,g as y}from"./index-b19461a9.js";const g={data(){return{content:"",files:[],error:null}},methods:{onFileChange(t){this.files=Array.from(t.target.files)},async createPost(){try{const t=new FormData;t.append("content",this.content),this.files.forEach((l,r)=>{t.append(`media_${r}`,l)});const e=localStorage.getItem("authToken"),a=await d.post("/api/posts/",t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Token ${e}`}});console.log("Post created:",a.data),this.$root.emitter.emit("postCreated"),this.$router.push("/feed")}catch(t){console.error("Create post error:",t),this.error="Failed to create post."}}}},C={key:0,style:{color:"red"}};function P(t,e,a,l,r,s){return i(),p("div",null,[e[6]||(e[6]=o("h2",null,"Create Post",-1)),o("form",{onSubmit:e[2]||(e[2]=c((...n)=>s.createPost&&s.createPost(...n),["prevent"])),enctype:"multipart/form-data"},[m(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=n=>r.content=n),placeholder:"What's on your mind?",required:""},null,512),[[f,r.content]]),e[3]||(e[3]=o("br",null,null,-1)),o("input",{type:"file",onChange:e[1]||(e[1]=(...n)=>s.onFileChange&&s.onFileChange(...n)),multiple:""},null,32),e[4]||(e[4]=o("br",null,null,-1)),e[5]||(e[5]=o("button",{type:"submit"},"Post",-1))],32),r.error?(i(),p("p",C,h(r.error),1)):y("",!0)])}const x=u(g,[["render",P]]);export{x as default};
