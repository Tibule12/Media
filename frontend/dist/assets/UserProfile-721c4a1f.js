import{_ as P,i as n,o as f,c as a,a as i,g as u,f as c,v as d,t as m,e as g}from"./index-b19461a9.js";const h={data(){return{profile:{fullName:"",bio:"",profilePicture:null},profilePicturePreview:null,message:"",error:""}},async created(){await this.fetchProfile()},methods:{async fetchProfile(){var o,e,t;this.error="";try{const s=await n.get("/api/users/me/");this.profile.fullName=((o=s.data.profile)==null?void 0:o.fullName)||"",this.profile.bio=((e=s.data.profile)==null?void 0:e.bio)||"",this.profilePicturePreview=((t=s.data.profile)==null?void 0:t.profilePicture)||null}catch{this.error="Failed to load profile. Please login again."}},onFileChange(o){const e=o.target.files[0];e&&(this.profile.profilePicture=e,this.profilePicturePreview=URL.createObjectURL(e))},async updateProfile(){var o;this.error="",this.message="";try{const e=new FormData;e.append("fullName",this.profile.fullName),e.append("bio",this.profile.bio),this.profile.profilePicture instanceof File&&e.append("profilePicture",this.profile.profilePicture);const t=await n.put("/api/users/me/",e,{headers:{"Content-Type":"multipart/form-data"}});this.message="Profile updated successfully.",this.profilePicturePreview=((o=t.data.profile)==null?void 0:o.profilePicture)||this.profilePicturePreview}catch{this.error="Failed to update profile."}}}},v={class:"profile-container"},b={key:0,class:"loading-message"},y={class:"form-group"},_={class:"form-group"},w={class:"form-group"},N={key:0,class:"preview"},F=["src"],x={key:0,class:"success-message"},U={key:1,class:"error-message"};function k(o,e,t,s,r,p){return f(),a("div",v,[e[8]||(e[8]=i("h1",null,"User Profile",-1)),!r.profile.fullName&&!r.profile.bio&&!r.profilePicturePreview?(f(),a("p",b,"Loading profile...")):u("",!0),i("form",{onSubmit:e[3]||(e[3]=g((...l)=>p.updateProfile&&p.updateProfile(...l),["prevent"])),enctype:"multipart/form-data"},[i("div",y,[e[4]||(e[4]=i("label",{for:"fullName"},"Full Name",-1)),c(i("input",{id:"fullName","onUpdate:modelValue":e[0]||(e[0]=l=>r.profile.fullName=l),type:"text",placeholder:"Full Name"},null,512),[[d,r.profile.fullName]])]),i("div",_,[e[5]||(e[5]=i("label",{for:"bio"},"Bio",-1)),c(i("textarea",{id:"bio","onUpdate:modelValue":e[1]||(e[1]=l=>r.profile.bio=l),placeholder:"Tell us about yourself"},null,512),[[d,r.profile.bio]])]),i("div",w,[e[6]||(e[6]=i("label",{for:"profilePicture"},"Profile Picture",-1)),i("input",{id:"profilePicture",type:"file",onChange:e[2]||(e[2]=(...l)=>p.onFileChange&&p.onFileChange(...l))},null,32),r.profilePicturePreview?(f(),a("div",N,[i("img",{src:r.profilePicturePreview,alt:"Profile Picture Preview"},null,8,F)])):u("",!0)]),e[7]||(e[7]=i("button",{type:"submit",class:"btn btn-primary"},"Save Profile",-1)),r.message?(f(),a("p",x,m(r.message),1)):u("",!0),r.error?(f(),a("p",U,m(r.error),1)):u("",!0)],32)])}const B=P(h,[["render",k],["__scopeId","data-v-96845ee0"]]);export{B as default};
